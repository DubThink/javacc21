#!/bin/sh

# This script is really just for people who are working on the code. If there are classfiles in
# the build directory, it uses those, since those would be the most up-to-date version.
# An end user who is not in the code can perfectly well just launch the jarfile directly, as in:
#
#    java -jar javacc.jar <args>
#

pushd $(dirname $0)
cd ..
BASE_DIR=$(pwd)
popd

SEP=":"

# Let's go the extra 9 yards to get this working on Cygwin and such.
# I hope people appreciate the effort!
case "$(uname -s)" in
    CYGWIN*)
      SEP=';'
      BASE_DIR=$(cygpath -w $BASE_DIR)
    ;;
    MINGW*)
      SEP=';'
      BASE_DIR=$(cygpath -w $BASE_DIR)
    ;;
    MSYS*)
      SEP=';'
      BASE_DIR=$(cygpath -w $BASE_DIR)
    ;;
esac

# If there are classfiles in the build directory, use those. Otherwise, use the javacc.jar in the bootstrap
# directory.

java -classpath $BASE_DIR/build$SEP$BASE_DIR/bootstrap/javacc.jar$SEP$BASE_DIR/bootstrap/freemarker.jar javacc.Main "$@"

